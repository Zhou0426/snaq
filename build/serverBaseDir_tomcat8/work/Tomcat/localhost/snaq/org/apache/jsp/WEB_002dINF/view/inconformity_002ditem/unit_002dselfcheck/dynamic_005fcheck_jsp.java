/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/8.0.23
 * Generated at: 2017-07-12 15:34:38 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.WEB_002dINF.view.inconformity_002ditem.unit_002dselfcheck;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class dynamic_005fcheck_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = null;
  }

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

final java.lang.String _jspx_method = request.getMethod();
if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET POST or HEAD");
return;
}

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n");
      out.write("<title>Insert title here</title>\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/easyui/themes/default/easyui.css\">\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/easyui/themes/icon.css\">\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/easyui/jquery.min.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/easyui/jquery.easyui.min.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/easyui/locale/easyui-lang-zh_CN.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/easyui/datagrid-detailview.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\t\r\n");
      out.write("\tvar inconformityItemSnValue=new Array();\r\n");
      out.write("\tvar specialityValue=new Array();\r\n");
      out.write("\tvar unsafeActMarkValue=new Array();\r\n");
      out.write("\tvar unsafeActStandardValue=new Array();\r\n");
      out.write("\tvar unsafeActLevelValue=new Array();\r\n");
      out.write("\r\n");
      out.write("\tfunction attachment(index){\r\n");
      out.write("\t\t$('#dg').datagrid('clearSelections');//清处多选的行\r\n");
      out.write("\t\t\t$('#win').window({\r\n");
      out.write("\t\t\t\twidth:400,\r\n");
      out.write("\t\t\t\theight:300,\r\n");
      out.write("\t\t\t\ttitle:'相关附件',\r\n");
      out.write("\t\t\t\tcache:false,\r\n");
      out.write("\t\t\t\tcontent:'<iframe src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/inconformity/item/dynamic_check_attachment\" frameborder=\"0\" width=\"100%\" height=\"100%\"/>'\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t}\r\n");
      out.write("\tfunction attachment_unsafeAct(index){\r\n");
      out.write("\t\t$('#dg2').datagrid('clearSelections');//清处多选的行\r\n");
      out.write("\t\t\t$('#win2').window({\r\n");
      out.write("\t\t\t\twidth:400,\r\n");
      out.write("\t\t\t\theight:300,\r\n");
      out.write("\t\t\t\ttitle:'相关附件',\r\n");
      out.write("\t\t\t\tcache:false,\r\n");
      out.write("\t\t\t\tcontent:'<iframe src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/inconformity/item/dynamic_check_attachment_unsafeAct\" frameborder=\"0\" width=\"100%\" height=\"100%\"/>'\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t};\r\n");
      out.write("\tfunction toDoThing(){\r\n");
      out.write("\t\t$.ajax({\r\n");
      out.write("\t\t\t   type: \"POST\",\r\n");
      out.write("\t\t\t   url: '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/person/findSessionActionP.action',\r\n");
      out.write("\t\t\t   success: function(msg){\r\n");
      out.write("\t\t\t\t   var rec=eval('(' + msg + ')');\r\n");
      out.write("\t\t\t\t   //console.log(parent.$('#mm21').attr('id'));\r\n");
      out.write("\t\t\t\t   parent.$('#toDoList').html(\"待办事项[\"+rec.countThing+\"]\");\r\n");
      out.write("\t\t\t\t   parent.$('#mm24').html(\"检查任务[\"+rec.checkTask+\"]\");\r\n");
      out.write("\t\t\t\t   parent.$('#mm21').html(\"需我整改的[\"+rec.correctCount+\"]\");\r\n");
      out.write("\t\t\t\t   parent.$('#mm22').html(\"需我复查的[\"+rec.reviewCount+\"]\");\r\n");
      out.write("\t\t\t\t   parent.$('#mm23').html(\"我的检查表[\"+rec.myCheckTable+\"]\");\r\n");
      out.write("\t\t\t   }\r\n");
      out.write("\t\t});\r\n");
      out.write("\t};\r\n");
      out.write("\t$(function(){\r\n");
      out.write("\t\tvar resources=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope['permissions']}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\";\r\n");
      out.write("\t\tvar roles=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope['roles']}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\";\r\n");
      out.write("\t\tvar loginId=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope['personId']}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("\";\r\n");
      out.write("\t\t$('#dg').datagrid({\r\n");
      out.write("\t\t\turl:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/inconformity/item/unsafeconditionAction_query',//要改为一个action\r\n");
      out.write("\t\t\tidField:\"id\",// id字段为标识字段,那么此字段状态将会被dg记录下来\r\n");
      out.write("\t\t\t//title:\"动态检查\",\r\n");
      out.write("\t\t\tqueryParams:{checkType:'动态检查',checkerFrom:'单位'},//请求远程数据发送额外的参数\r\n");
      out.write("\t\t\tfitColumns:true,/*列宽自动*/\r\n");
      out.write("\t\t\tfit:true,\r\n");
      out.write("\t\t\tstriped:true,/*斑马线效果  */\r\n");
      out.write("\t\t\tnowrap:false,/*数据同一行*/\r\n");
      out.write("\t\t\tloadmsg:'请等待',\r\n");
      out.write("\t\t\trownumbers:true,/* 行号*/\r\n");
      out.write("\t\t\tremoteSort:false,/*禁止使用远程排序*/\r\n");
      out.write("\t\t\tsingleSelect:true,\r\n");
      out.write("\t\t\tonSelect:function(index,row){\r\n");
      out.write("\t\t\t\tif(resources.indexOf('01030101')==-1){\r\n");
      out.write("\t\t\t\t\t$('#unsafecondition-add').css('display','none');\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\tif(resources.indexOf('01030102')==-1){\r\n");
      out.write("\t\t\t\t\t$('#unsafecondition-delete').css('display','none');\r\n");
      out.write("\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\tif(loginId==row.editor.personId || (row.checkers.num>0 && $.inArray('");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope.pId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("', row.checkers.personIds.split(','))!=-1) || roles.indexOf('dwxtgly')!=-1){\r\n");
      out.write("\t\t\t\t\t\t$('#unsafecondition-delete').css('display','');\r\n");
      out.write("\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t$('#unsafecondition-delete').css('display','none');\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\tif(resources.indexOf('01030103')==-1){\r\n");
      out.write("\t\t\t\t\t$('#unsafecondition-update').css('display','none');\r\n");
      out.write("\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\tif(loginId==row.editor.personId || (row.checkers.num>0 && $.inArray('");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope.pId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("', row.checkers.personIds.split(','))!=-1) || roles.indexOf('dwxtgly')!=-1){\r\n");
      out.write("\t\t\t\t\t\t$('#unsafecondition-update').css('display','');\r\n");
      out.write("\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t$('#unsafecondition-update').css('display','none');\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\t/*分页相关参数配置*/\r\n");
      out.write("\t\t\tpagination:true,\r\n");
      out.write("\t\t\tpageNumber:1,\r\n");
      out.write("\t\t\tpageSize:5,\r\n");
      out.write("\t\t\tpageList:[5,10,15,20],\r\n");
      out.write("\t\t\t/*按钮*/\r\n");
      out.write("\t\t\ttoolbar:[{\r\n");
      out.write("\t\t\t\ticonCls:'icon-add',\r\n");
      out.write("\t\t\t\ttext:'添加',\r\n");
      out.write("\t\t\t\tid:'unsafecondition-add',\r\n");
      out.write("\t\t\t\thandler:function(){\r\n");
      out.write("\t\t\t\t\t//判断是否有权限\r\n");
      out.write("\t\t\t\t\tif(resources.indexOf('01030101')==-1){\r\n");
      out.write("\t\t\t\t\t\t$('#unsafecondition-add').css('display','none');\r\n");
      out.write("\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t$('#win').window({\r\n");
      out.write("\t\t\t \t\t\t\twidth:730,\r\n");
      out.write("\t\t\t \t\t\t\theight:410,\r\n");
      out.write("\t\t\t \t\t\t\ttitle:'添加不符合项-隐患',\r\n");
      out.write("\t\t\t \t\t\t\tcache:false,\r\n");
      out.write("\t\t\t \t\t\t\tcontent:'<iframe src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/unit/selfcheck/dynamic_check_add\" frameborder=\"0\" width=\"100%\" height=\"100%\"/>'\r\n");
      out.write("\t\t\t \t\t\t});\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t},{\r\n");
      out.write("\t\t\t\tid:'unsafecondition-delete',\r\n");
      out.write("\t\t\t\ticonCls:'icon-cancel',\r\n");
      out.write("\t\t\t\ttext:'删除',\r\n");
      out.write("\t\t\t\thandler:function(){\r\n");
      out.write("\t\t\t\t\tif(resources.indexOf('01030102')==-1){\r\n");
      out.write("\t\t\t\t\t\t$('#unsafecondition-delete').css('display','none');\r\n");
      out.write("\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t//1、获取选中行\r\n");
      out.write("\t\t\t\t\t\tvar rows=$(\"#dg\").datagrid(\"getSelections\");\r\n");
      out.write("\t\t\t\t\t\t//2、对事件进行判断，和删除确认\r\n");
      out.write("\t\t\t\t\t\tif(rows.length==0){\r\n");
      out.write("\t\t\t\t\t\t\t$.messager.show({\r\n");
      out.write("\t\t\t\t\t\t\t\ttitle:'提示',\r\n");
      out.write("\t\t\t\t\t\t\t\tmsg:'至少选择为一条记录！',\r\n");
      out.write("\t\t\t\t\t\t\t\ttimeout:2000,\r\n");
      out.write("\t\t\t\t\t\t\t\tshowType:'show',\r\n");
      out.write("\t\t\t\t\t\t\t\tstyle:{\r\n");
      out.write("\t\t\t\t\t\t\t\t\tright:'',\r\n");
      out.write("\t\t\t\t\t\t\t\t\ttop:document.body.scrollTop+document.documentElement.scrollTop+200,\r\n");
      out.write("\t\t\t\t\t\t\t\t\tbottom:''\r\n");
      out.write("\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t});\r\n");
      out.write("\t\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t\t//判断是否为录入人或dwxtgly或检查人\r\n");
      out.write("\t\t\t\t\t\t\tif(loginId==rows[0].editor.personId || (rows[0].checkers.num>0 && $.inArray('");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope.pId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("', rows[0].checkers.personIds.split(','))!=-1) || roles.indexOf('dwxtgly')!=-1){\r\n");
      out.write("\t\t\t\t\t\t\t\t$.messager.confirm('删除确认','您确定要删除选中的数据吗？',function(r){\r\n");
      out.write("\t\t\t\t\t\t\t\t\tif(r){\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t//3、获取要删除的id值 1,2,3===> String ids  delete from category where id in (1,2,3)\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tvar ids=\"\";\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tfor(var i=0;i<rows.length;i++){\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\tids += rows[i].id+\",\";\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tids=ids.substring(0,ids.length-1);//截取字符串，除去最后一个逗号\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t//alert(ids.substring(0,ids.length-1));//只是试验一下\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t//4、发送请求提交删除信息\r\n");
      out.write("\t\t\t\t                        $.post(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/inconformity/item/unsafeconditionAction_deleteByIds.action\",{ids:ids},function(result){\r\n");
      out.write("\t\t\t\t                        \tvar data= eval('(' + result + ')');\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\tvar status=data.status;\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\tvar msg=data.message;\t\t\t\t\t\t\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\tif(status==\"ok\"){\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t$.messager.alert(\"提示信息\",msg);\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t$.messager.alert(\"提示信息\",msg,'error');\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t//删除页面，刷新\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t$(\"#dg\").datagrid(\"clearChecked\");\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t$(\"#dg\").datagrid(\"reload\");\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\ttoDoThing();\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t},\"text\");\r\n");
      out.write("\t\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t\t});\r\n");
      out.write("\t\t\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t\t\t$.messager.alert('我的消息','对不起！您没有删除此记录的权限！','warning');\r\n");
      out.write("\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\t\t\t\t\r\n");
      out.write("\t\t\t},{\r\n");
      out.write("\t\t\t\tid:'unsafecondition-update',\r\n");
      out.write("\t\t\t\ticonCls:'icon-edit',\r\n");
      out.write("\t\t\t\ttext:'修改',\r\n");
      out.write("\t\t\t\thandler:function(){\r\n");
      out.write("\t\t\t\t\tif(resources.indexOf('01030103')==-1){\r\n");
      out.write("\t\t\t\t\t\t$('#unsafecondition-update').css('display','none');\r\n");
      out.write("\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\tvar rows=$(\"#dg\").datagrid(\"getSelections\");\r\n");
      out.write("\t\t\t\t\t\tif(rows.length==1){\r\n");
      out.write("\t\t\t\t\t\t\tif(loginId==rows[0].editor.personId || (rows[0].checkers.num>0 && $.inArray('");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope.pId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("', rows[0].checkers.personIds.split(','))!=-1) || roles.indexOf('dwxtgly')!=-1){\r\n");
      out.write("\t\t\t\t\t\t\t\t$('#win').window({\r\n");
      out.write("\t\t\t\t\t\t\t\t\twidth:730,\r\n");
      out.write("\t\t\t\t\t\t\t\t\theight:410,\r\n");
      out.write("\t\t\t\t\t\t\t\t\ttitle:\"修改记录\",\r\n");
      out.write("\t\t\t\t\t\t\t\t\tcache:false,\r\n");
      out.write("\t\t\t\t\t\t\t\t\tcontent:'<iframe src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/unit/selfcheck/dynamic_check_update\" frameborder=\"0\" width=\"100%\" height=\"100%\"/>'\r\n");
      out.write("\t\t\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\t\t\t});\r\n");
      out.write("\t\t\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t\t\t$.messager.alert('我的消息','对不起！您没有修改此记录的权限！','warning');\r\n");
      out.write("\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t\t$.messager.show({\r\n");
      out.write("\t\t\t\t\t\t\t\ttitle:'错误提示',\r\n");
      out.write("\t\t\t\t\t\t\t\tmsg:'一次只能更新一条记录！',\r\n");
      out.write("\t\t\t\t\t\t\t\ttimeout:2000,\r\n");
      out.write("\t\t\t\t\t\t\t\tshowType:'show',\r\n");
      out.write("\t\t\t\t\t\t\t\tstyle:{\r\n");
      out.write("\t\t\t\t\t\t\t\t\tright:'',\r\n");
      out.write("\t\t\t\t\t\t\t\t\ttop:document.body.scrollTop+document.documentElement.scrollTop+200,\r\n");
      out.write("\t\t\t\t\t\t\t\t\tbottom:''\r\n");
      out.write("\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t});\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t\t],\r\n");
      out.write("\t\t\t/*列*/\r\n");
      out.write("\t\t\tcolumns:[[\r\n");
      out.write("\t\t\t\t{field:'id',title:'逻辑主键',hidden:true},\r\n");
      out.write("\t\t\t\t{field:'checkDateTime',title:'检查时间',width:'5%'},\r\n");
      out.write("\t\t\t\t{field:'checkLocation',title:'检查地点',width:'5%'},\t\t\t\r\n");
      out.write("\t\t\t\t{field:'inconformityItemNature',title:'不符合项性质',width:'5%'},\r\n");
      out.write("\t\t\t\t{field:'machine.manageObjectSn',title:'机',width:'5%',formatter:function(value,row,index){\r\n");
      out.write("\t\t\t\t\tif(row.machine.isnull==false){\r\n");
      out.write("\t\t\t\t\t\treturn row.machine.manageObjectName;\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}},\r\n");
      out.write("\t\t\t\t{field:'checkedDepartment.departmentName',title:'被检部门',width:'5%',formatter:function(value,row,index){\r\n");
      out.write("\t\t\t\t\tif(row.checkedDepartment.isnull==false){\r\n");
      out.write("\t\t\t\t\t\treturn row.checkedDepartment.departmentName;\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}},\r\n");
      out.write("\t\t\t\t{field:'problemDescription',title:'问题描述',width:'20%'},\r\n");
      out.write("\t\t\t\t{field:'deductPoints',title:'扣分',width:'3%'},\r\n");
      out.write("\t\t\t\t{field:'inconformityLevel',title:'不符合项等级',width:'5%'},\r\n");
      out.write("\t\t\t\t{field:'correctType',title:'整改类型',width:'5%'},\r\n");
      out.write("\t\t\t\t{field:'correctDeadline',title:'整改期限',width:'5%',styler: function(value,row,index){\r\n");
      out.write("\t\t\t\t\tif(row.hasCorrectConfirmed==false){\r\n");
      out.write("\t\t\t\t\t\tif(value!=null && value.length>0){\r\n");
      out.write("\t\t  \t\t\t\t\tvar date=new Date(value);\r\n");
      out.write("\t\t  \t\t\t\t\tif(date<new Date()){\r\n");
      out.write("\t\t  \t\t\t\t\t\treturn 'background-color:#ff5544';\r\n");
      out.write("\t\t  \t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t  \t\t\t}},\t\t\t\t\r\n");
      out.write("\t\t\t\t{field:'correctProposal',title:'整改建议',width:'20%'},\r\n");
      out.write("\t\t\t\t{field:'hasCorrectConfirmed',title:'整改确认',width:'5%',formatter:function(value,row,index){\r\n");
      out.write("\t\t\t\t\tif(row.hasCorrectConfirmed==false){\r\n");
      out.write("\t\t\t\t\t\treturn '否';\r\n");
      out.write("\t\t\t\t\t}else if(row.hasCorrectConfirmed==true){\r\n");
      out.write("\t\t\t\t\t\treturn '是';\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}},\r\n");
      out.write("\t\t\t\t{field:'hasReviewed',title:'已复查',width:'5%',formatter:function(value,row,index){\r\n");
      out.write("\t\t\t\t\tif(row.hasReviewed==false){\r\n");
      out.write("\t\t\t\t\t\treturn '否';\r\n");
      out.write("\t\t\t\t\t}else if(row.hasReviewed==true){\r\n");
      out.write("\t\t\t\t\t\treturn '是';\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}},\r\n");
      out.write("\t\t\t\t{field:'hasCorrectFinished',title:'整改完成',width:'5%',formatter:function(value,row,index){\r\n");
      out.write("\t\t\t\t\tif(row.hasCorrectFinished==false){\r\n");
      out.write("\t\t\t\t\t\treturn '否';\r\n");
      out.write("\t\t\t\t\t}else if(row.hasCorrectFinished==true){\r\n");
      out.write("\t\t\t\t\t\treturn '是';\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}},\r\n");
      out.write("\t\t\t\t{field:'attachment',title:'相关附件',width:'5%',formatter:function(value,row,index){\r\n");
      out.write("\t\t\t\t\treturn \"<a href='#' onclick='attachment(\"+index+\")' style='text-decoration:none'>\" + \"附件\"+\"[\"+value+\"]\" + \"</a>\";\r\n");
      out.write("\t\t\t\t}}\r\n");
      out.write("\t\t\t\t]],\r\n");
      out.write("\t\t\t\tview: detailview, \r\n");
      out.write("\t\t\t\tdetailFormatter: function(rowIndex, row){\r\n");
      out.write("\t\t\t\t\t//指标\r\n");
      out.write("\t\t\t\t\tvar standardIndex=\"无\";\r\n");
      out.write("\t\t\t\t\tif(row.standardIndex.isnull==false){\r\n");
      out.write("\t\t\t\t\t\tstandardIndex=row.standardIndex.indexName;\r\n");
      out.write("\t        \t\t}\r\n");
      out.write("\t        \t\t//危险源\r\n");
      out.write("\t        \t\tvar hazard=\"无\"\r\n");
      out.write("\t\t\t\t\tif(row.hazard.isnull==false){\r\n");
      out.write("\t\t\t\t\t\thazard=row.hazard.hazardDescription;\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t//扣分项\r\n");
      out.write("\t\t\t\t\tvar methodcount=\"无\"\r\n");
      out.write("\t\t\t\t\tif(row.auditMethod.num>0){\r\n");
      out.write("\t\t\t\t\t\tvar method=row.auditMethod.method.split(',');\r\n");
      out.write("\t\t\t\t\t\tvar count=row.auditMethod.count.split(',');\r\n");
      out.write("\t\t\t\t\t\tmethodcount=\"\";\r\n");
      out.write("\t\t\t\t\t\tfor(var i=0;i<row.auditMethod.num;i++){\r\n");
      out.write("\t\t\t\t\t\t\tmethodcount+=(i+1)+\".\"+method[i]+\"(\"+count[i]+\")&nbsp;\";\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t//专业\r\n");
      out.write("\t\t\t\t\tvar speciality=\"无\"\r\n");
      out.write("\t\t\t\t\tif(row.speciality.isnull==false){\r\n");
      out.write("\t\t\t\t\t\tspeciality=row.speciality.specialityName;\r\n");
      out.write("\t        \t\t}\r\n");
      out.write("\t        \t\t//检查人员\r\n");
      out.write("\t        \t\tvar persons=\"无\";\r\n");
      out.write("\t\t\t\t\tif(row.checkers.num>0){\r\n");
      out.write("\t\t\t\t\t\tpersons=row.checkers.personNames;\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t//整改负责人\r\n");
      out.write("\t\t\t\t\tvar person=\"无\";\r\n");
      out.write("\t\t\t\t\tif(row.correctPrincipal.isnull==false){\r\n");
      out.write("\t\t\t\t\t\tperson=row.correctPrincipal.personName;\r\n");
      out.write("\t        \t\t}\r\n");
      out.write("\t\t\t\t\t//录入人\r\n");
      out.write("\t        \t\tvar editor=\"无\";\r\n");
      out.write("\t        \t\tif(row.editor.isnull==false){\r\n");
      out.write("\t        \t\t\teditor=row.editor.personName;\r\n");
      out.write("\t\t        \t}\r\n");
      out.write("\t\t\t\treturn '<table style=\"border:1\"><tr>' + \t\t\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t'<td style=\"width:50px;text-align:center\">'+'指标：' + '</td>' + \r\n");
      out.write("\t\t\t\t'<td style=\"width:220px;\">' + \r\n");
      out.write("\t\t\t\t'<p>' + standardIndex + '</p>' + \r\n");
      out.write("\t\t\t\t'</td>' +\r\n");
      out.write("\t\t\t\t'<td style=\"width:50px;text-align:center\">'+'危险源：' + '</td>' + \r\n");
      out.write("\t\t\t\t'<td style=\"width:220px;\">' + \r\n");
      out.write("\t\t\t\t'<p>' + hazard + '</p>' + \r\n");
      out.write("\t\t\t\t'</td>' +\r\n");
      out.write("\t\t\t\t'<td style=\"width:50px;text-align:center\">'+'扣分项：' + '</td>' + \r\n");
      out.write("\t\t\t\t'<td style=\"width:220px;\">' + \r\n");
      out.write("\t\t\t\t'<p>' + methodcount + '</p>' + \r\n");
      out.write("\t\t\t\t'</td>' + \r\n");
      out.write("\t\t\t\t'<td style=\"width:50px;text-align:center\">'+'专业：' + '</td>' + \r\n");
      out.write("\t\t\t\t'<td style=\"width:100px;\">' + \r\n");
      out.write("\t\t\t\t'<p>' + speciality + '</p>' + \r\n");
      out.write("\t\t\t\t'</td>' +\r\n");
      out.write("\t\t\t\t'<td style=\"width:50px;text-align:center\">'+'检查人：' + '</td>' + \r\n");
      out.write("\t\t\t\t'<td style=\"width:150px;\">' + \r\n");
      out.write("\t\t\t\t'<p>' + persons + '</p>' + \r\n");
      out.write("\t\t\t\t'</td>' +\r\n");
      out.write("\t\t\t\t'<td style=\"width:50px;text-align:center\">'+'整改负责人：' + '</td>' + \r\n");
      out.write("\t\t\t\t'<td style=\"width:50px;\">' + \r\n");
      out.write("\t\t\t\t'<p>' + person + '</p>' + \r\n");
      out.write("\t\t\t\t'</td>' + \r\n");
      out.write("\t\t\t\t'<td style=\"width:50px;text-align:center\">'+'录入人：' + '</td>' + \r\n");
      out.write("\t\t\t\t'<td style=\"width:50px;\">' + \r\n");
      out.write("\t\t\t\t'<p>' + editor + '</p>' + \r\n");
      out.write("\t\t\t\t'</td>' +\r\n");
      out.write("\t\t\t\t'<td style=\"width:50px;text-align:center\">'+'录入时间：' + '</td>' + \r\n");
      out.write("\t\t\t\t'<td style=\"width:100px;\">' + \r\n");
      out.write("\t\t\t\t'<p>' + row.editorDateTime + '</p>' + \r\n");
      out.write("\t\t\t\t'</td>' +\r\n");
      out.write("\t\t\t\t'</tr></table>'; \r\n");
      out.write("\t\t\t\t} \t\t\t\t\t\t\t\r\n");
      out.write("\t\t});\t\r\n");
      out.write("\t\t//隐患第一层权限\r\n");
      out.write("\t\tif(resources.indexOf('01030101')==-1){\r\n");
      out.write("\t\t\t$('#unsafecondition-add').css('display','none');\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif(resources.indexOf('01030102')==-1){\r\n");
      out.write("\t\t\t$('#unsafecondition-delete').css('display','none');\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif(resources.indexOf('01030103')==-1){\r\n");
      out.write("\t\t\t$('#unsafecondition-update').css('display','none');\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t$('#dg2').datagrid({\r\n");
      out.write("\t\t\turl:'");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/inconformity/item/unsafeActAction_query.action',//要改为一个action\r\n");
      out.write("\t\t\tidField:\"id\",// id字段为标识字段,那么此字段状态将会被dg记录下来\r\n");
      out.write("\t\t\t//title:\"动态检查\",\r\n");
      out.write("\t\t\tqueryParams:{checkTypeSn:'0',checkerFromSn:'1'},//请求远程数据发送额外的参数\r\n");
      out.write("\t\t\tfitColumns:true,/*列宽自动*/\r\n");
      out.write("\t\t\tfit:true,\r\n");
      out.write("\t\t\tstriped:true,/*斑马线效果  */\r\n");
      out.write("\t\t\tnowrap:false,/*数据同一行*/\r\n");
      out.write("\t\t\tloadmsg:'请等待',\r\n");
      out.write("\t\t\trownumbers:true,/* 行号*/\r\n");
      out.write("\t\t\tremoteSort:false,/*禁止使用远程排序*/\r\n");
      out.write("\t\t\tsingleSelect:true,\r\n");
      out.write("\t\t\tcheckOnSelect:false,\r\n");
      out.write("\t\t\t/*分页相关参数配置*/\r\n");
      out.write("\t\t\tpagination:true,\r\n");
      out.write("\t\t\tpageNumber:1,\r\n");
      out.write("\t\t\tpageSize:5,\r\n");
      out.write("\t\t\tpageList:[5,10,15,20,25,30],\r\n");
      out.write("\t\t\tonSelect:function(index,row){\r\n");
      out.write("\t\t\t\t//第二层权限限制\r\n");
      out.write("\t\t\t\tif(resources.indexOf('01030105')==-1){\r\n");
      out.write("\t\t\t\t\t$('#unsafeact-add').css('display','none');\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\tif((row.editor!=\"无\" && loginId==row.editorId) || (row.checkers!=\"无\" && $.inArray('");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope.pId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("', row.checkersId.split(','))!=-1) || roles.indexOf('dwxtgly')!=-1){\r\n");
      out.write("\t\t\t\t\tif(resources.indexOf('01030106')==-1){\r\n");
      out.write("\t\t\t\t\t\t$('#unsafeact-remove').css('display','none');\r\n");
      out.write("\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t$('#unsafeact-remove').css('display','');\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\tif(resources.indexOf('01030107')==-1){\r\n");
      out.write("\t\t\t\t\t\t$('#unsafeact-edit').css('display','none');\r\n");
      out.write("\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t$('#unsafeact-edit').css('display','');\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t$('#unsafeact-remove').css('display','none');\r\n");
      out.write("\t\t\t\t\t$('#unsafeact-edit').css('display','none');\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t},\r\n");
      out.write("\t\t\t/*按钮*/\r\n");
      out.write("\t\t\ttoolbar:[{\r\n");
      out.write("\t\t\t\tid:'unsafeact-add',\r\n");
      out.write("\t\t\t\ticonCls:'icon-add',\r\n");
      out.write("\t\t\t\ttext:'添加',\r\n");
      out.write("\t\t\t\thandler:function(){\r\n");
      out.write("\t\t\t\t\tif(resources.indexOf('01030105')==-1){\r\n");
      out.write("\t\t\t\t\t\t$('#unsafeact-add').css('display','none');\r\n");
      out.write("\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t \t$('#win2').window({\r\n");
      out.write("\t\t\t\t\t \t\twidth:740,\r\n");
      out.write("\t\t\t\t\t \t\theight:430,\r\n");
      out.write("\t\t\t\t\t \t\ttitle:'不符合项-不安全行为',\r\n");
      out.write("\t\t\t\t\t \t\tcache:false,\r\n");
      out.write("\t\t\t\t\t \t\tcontent:'<iframe src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/unit/selfcheck/dynamic_check_add_unsafeAct\" frameborder=\"0\" width=\"100%\" height=\"100%\"/>'\r\n");
      out.write("\t\t\t\t\t \t});\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t},{\r\n");
      out.write("\t\t\t\tid:'unsafeact-remove',\r\n");
      out.write("\t\t\t\ticonCls:'icon-cancel',\r\n");
      out.write("\t\t\t\ttext:'删除',\r\n");
      out.write("\t\t\t\thandler:function(){\r\n");
      out.write("\t\t\t\t\tif(resources.indexOf('01030106')==-1){\r\n");
      out.write("\t\t\t\t\t\t$('#unsafeact-remove').css('display','none');\r\n");
      out.write("\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t//1、获取选中行\r\n");
      out.write("\t\t\t\t\t\tvar rows=$(\"#dg2\").datagrid(\"getSelections\");\r\n");
      out.write("\t\t\t\t\t\t//2、对事件进行判断，和删除确认\r\n");
      out.write("\t\t\t\t\t\tif(rows.length==0){\r\n");
      out.write("\t\t\t\t\t\t\t$.messager.show({\r\n");
      out.write("\t\t\t\t\t\t\t\ttitle:'提示',\r\n");
      out.write("\t\t\t\t\t\t\t\tmsg:'至少选择为一条记录！',\r\n");
      out.write("\t\t\t\t\t\t\t\ttimeout:2000,\r\n");
      out.write("\t\t\t\t\t\t\t\tshowType:'show',\r\n");
      out.write("\t\t\t\t\t\t\t\tstyle:{\r\n");
      out.write("\t\t\t\t\t\t\t\t\tright:'',\r\n");
      out.write("\t\t\t\t\t\t\t\t\ttop:document.body.scrollTop+document.documentElement.scrollTop+200,\r\n");
      out.write("\t\t\t\t\t\t\t\t\tbottom:''\r\n");
      out.write("\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t});\r\n");
      out.write("\t\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t\tif((rows[0].editor!=\"无\"&&loginId==rows[0].editorId) || (rows[0].checkers!=\"无\"&& $.inArray('");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope.pId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("', rows[0].checkersId.split(','))!=-1) || roles.indexOf('dwxtgly')!=-1){\r\n");
      out.write("\t\t\t\t\t\t\t\t$.messager.confirm('删除确认','您确定要删除选中的数据吗？',function(r){\r\n");
      out.write("\t\t\t\t\t\t\t\t\tif(r){\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tvar ids=\"\";\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tfor(var i=0;i<rows.length;i++){\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\tids += rows[i].id+\",\";\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\tids=ids.substring(0,ids.length-1);//截取字符串，除去最后一个逗号\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t//alert(ids.substring(0,ids.length-1));//只是试验一下\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t//4、发送请求提交删除信息\r\n");
      out.write("\t\t\t\t                        $.post(\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/inconformity/item/unsafeActAction_deleteUnsafeAct.action\",{ids:ids},function(result){\r\n");
      out.write("\t\t\t\t                        \tif(result==\"success\"){\r\n");
      out.write("\t\t\t\t                        \t\t$.messager.show({\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\ttitle:'提示',\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\tmsg:'成功删除信息！',\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\ttimeout:2000,\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t\tshowType:'slide'\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t});\t\r\n");
      out.write("\t\t\t\t                        \t}else{\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t$.messager.alert(\"提示信息\",\"删除出错，请重新操作！\",'error');\r\n");
      out.write("\t\t\t\t                        \t}\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t//删除页面，刷新\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t$(\"#dg2\").datagrid(\"clearChecked\");\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\t\t$(\"#dg2\").datagrid(\"reload\");\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t},\"json\");\r\n");
      out.write("\t\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t\t});\r\n");
      out.write("\t\t\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t\t\t$.messager.alert('我的消息','对不起！您没有删除此记录的权限！','warning');\r\n");
      out.write("\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t\t\r\n");
      out.write("\t\t\t},{\r\n");
      out.write("\t\t\t\tid:'unsafeact-edit',\r\n");
      out.write("\t\t\t\ticonCls:'icon-edit',\r\n");
      out.write("\t\t\t\ttext:'修改',\r\n");
      out.write("\t\t\t\thandler:function(){\r\n");
      out.write("\t\t\t\t\tvar rows=$(\"#dg2\").datagrid(\"getSelections\");\r\n");
      out.write("\t\t\t\t\tif(resources.indexOf('01030107')==-1){\r\n");
      out.write("\t\t\t\t\t\t$('#unsafeact-edit').css('display','none');\r\n");
      out.write("\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\tif(rows.length==1){\r\n");
      out.write("\t\t\t\t\t\t\tif((rows[0].editor!=\"无\"&&loginId==rows[0].editorId) || (rows[0].checkers!=\"无\"&& $.inArray('");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${sessionScope.pId}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("', rows[0].checkersId.split(','))!=-1) || roles.indexOf('dwxtgly')!=-1){\r\n");
      out.write("\t\t\t\t\t\t\t\t$('#win2').window({\r\n");
      out.write("\t\t\t\t\t\t\t\t\twidth:740,\r\n");
      out.write("\t\t\t\t\t\t\t\t\theight:430,\r\n");
      out.write("\t\t\t\t\t\t\t\t\ttitle:\"修改记录\",\r\n");
      out.write("\t\t\t\t\t\t\t\t\tcache:false,\r\n");
      out.write("\t\t\t\t\t\t\t\t\tcontent:'<iframe src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null));
      out.write("/unit/selfcheck/dynamic_check_update_unsafeAct\" frameborder=\"0\" width=\"100%\" height=\"100%\"/>'\r\n");
      out.write("\t\t\t\t\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t\t\t\t});\r\n");
      out.write("\t\t\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t\t\t$.messager.alert('我的消息','对不起！您没有修改此记录的权限！','warning');\r\n");
      out.write("\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t}else{\r\n");
      out.write("\t\t\t\t\t\t\t$.messager.show({\r\n");
      out.write("\t\t\t\t\t\t\t\ttitle:'错误提示',\r\n");
      out.write("\t\t\t\t\t\t\t\tmsg:'一次只能更新一条记录！',\r\n");
      out.write("\t\t\t\t\t\t\t\ttimeout:2000,\r\n");
      out.write("\t\t\t\t\t\t\t\tshowType:'show',\r\n");
      out.write("\t\t\t\t\t\t\t\tstyle:{\r\n");
      out.write("\t\t\t\t\t\t\t\t\tright:'',\r\n");
      out.write("\t\t\t\t\t\t\t\t\ttop:document.body.scrollTop+document.documentElement.scrollTop+200,\r\n");
      out.write("\t\t\t\t\t\t\t\t\tbottom:''\r\n");
      out.write("\t\t\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t\t\t});\r\n");
      out.write("\t\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t\t}\r\n");
      out.write("\t\t\t}],\r\n");
      out.write("\t\t\t/*列*/\r\n");
      out.write("\t\t\tcolumns:[[\r\n");
      out.write("\t\t\t\t\t{field:'id',title:'逻辑主键',hidden:true},\r\n");
      out.write("\t\t\t\t\t{field:'implDepartmentName',width:80,title:'贯标单位'},\r\n");
      out.write("\t\t\t\t\t{field:'checkedDepartment',width:80,title:'被检部门'},\r\n");
      out.write("\t\t\t\t\t{field:'violator',width:60,title:'不安全行为人员'},\r\n");
      out.write("\t\t\t\t\t{field:'actDescription',width:200,title:'行为描述'},\r\n");
      out.write("\t\t\t\t\t{field:'checkers',width:70,title:'检查成员'},\r\n");
      out.write("\t\t\t\t\t{field:'checkDateTime',width:50,title:'检查时间'},\r\n");
      out.write("\t\t\t\t\t{field:'checkLocation',width:70,title:'检查地点'},\r\n");
      out.write("\t\t\t\t\t{field:'editor',width:50,title:'录入人'},\r\n");
      out.write("\t\t\t\t\t{field:'editorId',width:100,hidden:true},\r\n");
      out.write("\t\t\t\t\t{field:'checkersId',width:100,hidden:true},\r\n");
      out.write("\t\t\t\t\t{field:'checkType',width:100,title:'检查类型',hidden:true},\r\n");
      out.write("\t\t\t\t\t{field:'checkerFrom',width:100,title:'检查人来自',hidden:true},\r\n");
      out.write("\t\t\t\t\t{field:'systemAudit',width:100,title:'所属的审核',hidden:true},\r\n");
      out.write("\t\t\t\t\t{field:'inconformityItemNature',width:100,title:'不符合项性质',hidden:true},\r\n");
      out.write("\t\t\t\t\t{field:'inconformityLevel',width:100,title:'不符合项等级',hidden:true},\r\n");
      out.write("\t\t\t\t\t{field:'inconformityItemSn',width:100,title:'不符合项编号',hidden:true,\r\n");
      out.write("\t\t\t\t\t\t  formatter: function(value,row,index){\r\n");
      out.write("\t\t\t\t\t\t\t  if(value!=null && value!=\"\"){\r\n");
      out.write("\t\t\t\t\t\t\t\t  inconformityItemSnValue[index]=value;\r\n");
      out.write("\t\t\t\t\t\t\t  }else{\r\n");
      out.write("\t\t\t\t\t\t\t\t  inconformityItemSnValue[index]=\"无\";\r\n");
      out.write("\t\t\t\t\t\t\t  }\r\n");
      out.write("\t\t\t\t\t\t  }},\r\n");
      out.write("\t\t\t\t\t  {field:'speciality',title:'所属专业',width:120,align:'center',hidden:true,\r\n");
      out.write("\t\t\t\t\t\t  formatter: function(value,row,index){\r\n");
      out.write("\t\t\t\t\t\t\t  if(value!=null && value!=\"\"){\r\n");
      out.write("\t\t\t\t\t\t\t\t  specialityValue[index]=value;\r\n");
      out.write("\t\t\t\t\t\t\t  }else{\r\n");
      out.write("\t\t\t\t\t\t\t\t  specialityValue[index]=\"无\";\r\n");
      out.write("\t\t\t\t\t\t\t  }\r\n");
      out.write("\t\t\t\t\t\t  }},\r\n");
      out.write("\t\t\t\t\t  {field:'unsafeActMark',title:'不安全行为痕迹',width:120,align:'center',hidden:true,\r\n");
      out.write("\t\t\t\t\t\t  formatter: function(value,row,index){\r\n");
      out.write("\t\t\t\t\t\t\t  if(value!=null && value!=\"\"){\r\n");
      out.write("\t\t\t\t\t\t\t\t  unsafeActMarkValue[index]=value;\r\n");
      out.write("\t\t\t\t\t\t\t  }else{\r\n");
      out.write("\t\t\t\t\t\t\t\t  unsafeActMarkValue[index]=\"无\";\r\n");
      out.write("\t\t\t\t\t\t\t  }\r\n");
      out.write("\t\t\t\t\t\t  }},\r\n");
      out.write("\t\t\t\t\t  {field:'unsafeActStandard',title:'不安全行为标准',width:120,align:'center',hidden:true,\r\n");
      out.write("\t\t\t\t\t\t  formatter: function(value,row,index){\r\n");
      out.write("\t\t\t\t\t\t\t  if(value!=null && value!=\"\"){\r\n");
      out.write("\t\t\t\t\t\t\t\t  unsafeActStandardValue[index]=value;\r\n");
      out.write("\t\t\t\t\t\t\t  }else{\r\n");
      out.write("\t\t\t\t\t\t\t\t  unsafeActStandardValue[index]=\"无\";\r\n");
      out.write("\t\t\t\t\t\t\t  }\r\n");
      out.write("\t\t\t\t\t\t  }},\r\n");
      out.write("\t\t\t\t\t  {field:'unsafeActLevel',title:'不安全行为等级',width:120,align:'center',hidden:true,\r\n");
      out.write("\t\t\t\t\t\t  formatter: function(value,row,index){\r\n");
      out.write("\t\t\t\t\t\t\t  if(value!=null && value!=\"\"){\r\n");
      out.write("\t\t\t\t\t\t\t\t  unsafeActLevelValue[index]=value;\r\n");
      out.write("\t\t\t\t\t\t\t  }else{\r\n");
      out.write("\t\t\t\t\t\t\t\t  unsafeActLevelValue[index]=\"无\";\r\n");
      out.write("\t\t\t\t\t\t\t  }\r\n");
      out.write("\t\t\t\t\t\t  }},\r\n");
      out.write("\t\t\t\t\t{field:'attachment',width:50,title:'相关附件',formatter:function(value,row,index){\r\n");
      out.write("\t\t\t\t\t\treturn \"<a href='#' onclick='attachment_unsafeAct(\"+index+\")' style='text-decoration:none'>\" + \"附件\"+\"[\"+value+\"]\" + \"</a>\";\r\n");
      out.write("\t\t\t\t\t}}\r\n");
      out.write("\t\t\t\t\t]],\r\n");
      out.write("\t\t\t\t\tview: detailview, \r\n");
      out.write("\t\t\t\t\tdetailFormatter: function(rowIndex, row){\r\n");
      out.write("\t\t\t\t\treturn '<table style=\"border:1\"><tr>' + \t\t\t\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t'<td style=\"width:100px;text-align:center\">'+'不符合项编号：' + '</td>' + \r\n");
      out.write("\t\t\t\t\t'<td style=\"width:140px;text-align:center\">' + \r\n");
      out.write("\t\t\t\t\t'<p>' + inconformityItemSnValue[rowIndex] + '</p>' + \r\n");
      out.write("\t\t\t\t\t'</td>' +\r\n");
      out.write("\t\t\t\t\t'<td style=\"width:100px;text-align:center\">'+'不安全行为等级：' + '</td>' + \r\n");
      out.write("\t\t\t\t\t'<td style=\"width:140px;text-align:center\">' + \r\n");
      out.write("\t\t\t\t\t'<p>' + unsafeActLevelValue[rowIndex] + '</p>' + \r\n");
      out.write("\t\t\t\t\t'</td>' +\r\n");
      out.write("\t\t\t\t\t'</tr><tr>' + \r\n");
      out.write("\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t'<td style=\"width:100px;text-align:center\">'+'专业：' + '</td>' + \r\n");
      out.write("\t\t\t\t\t'<td style=\"width:140px;text-align:center\" >' + \r\n");
      out.write("\t\t\t\t\t'<p>' + specialityValue[rowIndex] + '</p>' + \r\n");
      out.write("\t\t\t\t\t'</td>' +\r\n");
      out.write("\t\t\t\t\t'<td style=\"width:100px;text-align:center\">'+'痕迹：' + '</td>' + \r\n");
      out.write("\t\t\t\t\t'<td style=\"width:140px;text-align:center\">' + \r\n");
      out.write("\t\t\t\t\t'<p>' + unsafeActMarkValue[rowIndex] + '</p>' + \r\n");
      out.write("\t\t\t\t\t'</td>' +\r\n");
      out.write("\t\t\t\t\t'</tr><tr>' +\r\n");
      out.write("\t\t\t\t\t\r\n");
      out.write("\t\t\t\t\t'<td style=\"width:100px;text-align:center\">'+'标准：' + '</td>' + \r\n");
      out.write("\t\t\t\t\t'<td style=\"width:380px;text-align:center\" colspan=\"3\">' + \r\n");
      out.write("\t\t\t\t\t'<p>' + unsafeActStandardValue[rowIndex] + '</p>' + \r\n");
      out.write("\t\t\t\t\t'</td>' +\r\n");
      out.write("\t\t\t\t\t'</tr></table>'; \r\n");
      out.write("\t\t\t\t\t}\r\n");
      out.write("\t\t\t});\t\r\n");
      out.write("\t\t//不安全行为第一层权限\r\n");
      out.write("\t\tif(resources.indexOf('01030105')==-1){\r\n");
      out.write("\t\t\t$('#unsafeact-add').css('display','none');\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif(resources.indexOf('01030106')==-1){\r\n");
      out.write("\t\t\t$('#unsafeact-remove').css('display','none');\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tif(resources.indexOf('01030107')==-1){\r\n");
      out.write("\t\t\t$('#unsafeact-edit').css('display','none');\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\t$('#unsafecondition-add').linkbutton({plain:false});\r\n");
      out.write("\t\t$('#unsafecondition-delete').linkbutton({plain:false});\r\n");
      out.write("\t\t$('#unsafecondition-update').linkbutton({plain:false});\r\n");
      out.write("\t\t$('#unsafeact-add').linkbutton({plain:false});\r\n");
      out.write("\t\t$('#unsafeact-remove').linkbutton({plain:false});\r\n");
      out.write("\t\t$('#unsafeact-edit').linkbutton({plain:false});\r\n");
      out.write("\t});\r\n");
      out.write("</script>\r\n");
      out.write("</head>\r\n");
      out.write("<body style=\"margin:1px;\">\r\n");
      out.write("\t<!--头 -->\r\n");
      out.write("<div id=\"tt\" class=\"easyui-tabs\" data-options=\"fit:true\">   \r\n");
      out.write("    <div title=\"隐患\"  style=\"padding:1px;display:none;\">   \r\n");
      out.write("        <table id=\"dg\"></table>\r\n");
      out.write("\t\t<div id=\"win\" data-options=\"collapsible:false,minimizable:false,maximizable:false,modal:true\"></div>\r\n");
      out.write("    \t<div id=\"child-win\" data-options=\"collapsible:false,minimizable:false,maximizable:false,modal:true\"></div>   \r\n");
      out.write("    </div>   \r\n");
      out.write("    <div title=\"不安全行为\" style=\"padding:1px;display:none;\"> \r\n");
      out.write("    \t<table id=\"dg2\"></table>\r\n");
      out.write("\t\t<div id=\"win2\" data-options=\"collapsible:false,minimizable:false,maximizable:false,modal:true\"></div>\r\n");
      out.write("    </div>  \r\n");
      out.write("</div>  \r\n");
      out.write("\t\r\n");
      out.write("\t\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
